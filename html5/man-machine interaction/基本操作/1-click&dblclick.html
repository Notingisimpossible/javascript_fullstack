<!DOCTYPE html>
<html>

	<head>
		<title>click and dblclick fix</title>
		<meta charset="utf-8" />
	</head>

	<body>
		<h1>click and dblclick fix</h1>
		<div><input type="button" value="double click here"></div>
		<div id="box">color will be changed</div>
		<script>
			var input = document.querySelector('input');
			var box = document.querySelector('#box');
			var timer = null;
			input.addEventListener('click', function() {
				if(timer) {
					clearTimeout(timer);
				}
				timer = setTimeout(function() {
					box.style.color = "blue";
				}, 300);
			});
			input.addEventListener('dblclick', function() {
				if(timer) {
					clearTimeout(timer);
				}
				box.style.color = "red";
			})
		</script>
	</body>

</html>